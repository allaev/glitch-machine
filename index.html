<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Glitch Machine</title>
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script type="text/javascript" src="js/lib/paper-full.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.0.9/howler.core.min.js"></script>
    <script type="text/paperscript" canvas="myCanvas">
      var keyData = {
        q: {
          sound: new Howl({
            src: ['sounds/brushes.wav']
          }),
          color: '#1abc9c'
        },
        w: {
          sound: new Howl({
            src: ['sounds/buzzer.wav']
          }),
          color: '#2ecc71'
        },
        e: {
          sound: new Howl({
            src: ['sounds/chirp.wav']
          }),
          color: '#3498db'
        },
        r: {
          sound: new Howl({
            src: ['sounds/clack.wav']
          }),
          color: '#9b59b6'
        },
          t: {
          sound: new Howl({
            src: ['sounds/coin.wav']
          }),
          color: '#34495e'
        },
        y: {
          sound: new Howl({
            src: ['sounds/dink.wav']
          }),
          color: '#16a085'
        },
        u: {
          sound: new Howl({
            src: ['sounds/gong.wav']
          }),
          color: '#27ae60'
        },
        i: {
          sound: new Howl({
            src: ['sounds/grain.wav']
          }),
          color: '#2980b9'
        },
        o: {
          sound: new Howl({
            src: ['sounds/gulp.wav']
          }),
          color: '#8e44ad'
        },
        p: {
          sound: new Howl({
            src: ['sounds/hatch.wav']
          }),
          color: '#2c3e50'
        },
        a: {
          sound: new Howl({
            src: ['sounds/numeral.wav']
          }),
          color: '#f1c40f'
        },
        s: {
          sound: new Howl({
            src: ['sounds/ratchet1.wav']
          }),
          color: '#e67e22'
        },
          d: {
          sound: new Howl({
            src: ['sounds/ratchet2.wav']
          }),
          color: '#e74c3c'
        },
        f: {
          sound: new Howl({
            src: ['sounds/ring.wav']
          }),
          color: '#95a5a6'
        },
        g: {
          sound: new Howl({
            src: ['sounds/slap.wav']
          }),
          color: '#f39c12'
        },
        h: {
          sound: new Howl({
            src: ['sounds/smear.wav']
          }),
          color: '#d35400'
        },
        j: {
          sound: new Howl({
            src: ['sounds/spank.wav']
          }),
          color: '#1abc9c'
        },
        k: {
          sound: new Howl({
            src: ['sounds/stress.wav']
          }),
          color: '#2ecc71'
        },
        l: {
          sound: new Howl({
            src: ['sounds/subratchet.wav']
          }),
          color: '#3498db'
        },
        z: {
          sound: new Howl({
            src: ['sounds/tamb.wav']
          }),
          color: '#9b59b6'
        },
        x: {
          sound: new Howl({
            src: ['sounds/trashcan.wav']
          }),
          color: '#34495e'
        },
        c: {
          sound: new Howl({
            src: ['sounds/variation.wav']
          }),
          color: '#16a085'
        },
        v: {
          sound: new Howl({
            src: ['sounds/vox1.wav']
          }),
          color: '#27ae60'
        },
        b: {
          sound: new Howl({
            src: ['sounds/vox2.wav']
          }),
          color: '#2980b9'
        },
        n: {
          sound: new Howl({
            src: ['sounds/zing.wav']
          }),
          color: '#8e44ad'
        },
        m: {
          sound: new Howl({
            src: ['sounds/zip.wav']
          }),
          color: '#2c3e50'
        }
      }

      var circles = [];

      function onKeyDown(event) {
        if(keyData[event.key]){
          var maxPoint = new Point(view.size.width, view.size.height);
          var randomPoint = Point.random(); //create a random point
          var point = maxPoint * randomPoint;
          var newCircle = new Path.Circle(point, 500); //create a circle with a random point with a radius 500
          newCircle.fillColor = keyData[event.key].color;
          keyData[event.key].sound.play();
          circles.push(newCircle); //push it into the array "circles"
        }
      }

      function onFrame(event){ //every animation frame
        for (var i = 0; i < circles.length; i++) { //loop through the array "circles"
          circles[i].fillColor.hue += 1; //for each one add 1 to the hue
          circles[i].scale(.9); //scales down by 90% of what it was in a prev frame
        }
      }

    </script>
  </head>
  <body>
    <canvas id="myCanvas" resize></canvas>
    <script type="text/javascript" src="js/script.js"></script>
  </body>
</html>
